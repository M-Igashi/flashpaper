name = "flashpaper"
main = "src/worker.js"
compatibility_date = "2024-12-01"

# R2 bucket for static files (Google verification, sitemap)
[[r2_buckets]]
binding = "SITE_BUCKET"
bucket_name = "misc"

[durable_objects]
bindings = [
  { name = "NOTE_STORE", class_name = "NoteStore" },
  { name = "STATS_STORE", class_name = "StatsStore" },
  { name = "CHAT_STORE", class_name = "ChatStore" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["NoteStore"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["StatsStore"]

[[migrations]]
tag = "v3"
new_sqlite_classes = ["ChatStore"]

# Cron trigger - runs every hour to clean up expired notes and chats
[triggers]
crons = ["0 * * * *"]

# Environment variables: Set CF_ANALYTICS_TOKEN via Cloudflare dashboard or .dev.vars for local dev
# Do not add [vars] here as it will override dashboard settings on deploy
